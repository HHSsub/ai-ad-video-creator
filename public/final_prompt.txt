[2단계 - JSON ONLY OUTPUT]

ROLE: You are an expert video director & VFX supervisor. Convert the strategic natural-language plan (Phase 1 output) into a STRICT, MACHINE-VALID SINGLE JSON.

PHASE 1 RAW CONTEXT:
{phase1_output}

INPUT VARIABLES:
brandName: {brandName}
industryCategory: {industryCategory}
productServiceCategory: {productServiceCategory}
productServiceName: {productServiceName}
coreTarget: {coreTarget}
videoPurpose: {videoPurpose}
videoLengthRaw: {videoLength}
videoLengthSeconds: {videoLengthSeconds}
targetSceneCount: {targetSceneCount}
coreDifferentiation: {coreDifferentiation}
videoRequirements: {videoRequirements}
brandLogoProvided: {brandLogo}
productImageProvided: {productImage}
aspectRatioCode: {aspectRatioCode}

ABSOLUTE FORMAT RULES (CRITICAL):
- OUTPUT MUST BE A SINGLE RAW JSON OBJECT ONLY.
- DO NOT wrap in markdown, DO NOT use ```json fences, DO NOT add commentary.
- Every object property (except the last inside its scope) MUST end with a comma.
- All string values MUST be valid JSON strings (escape internal quotes if any).
- Use double quotes for all keys & string values (standard JSON).
- No trailing commas after the last property in an object or array.

SCENE LOGIC:
- Total scenes = {targetSceneCount}.
- Each scene duration_seconds = 2.
- Sequential timecodes: 00:00-00:02, 00:02-00:04, ...
- If total time would exceed {videoLengthSeconds}, still keep the scene count (we will trim downstream).

IMAGE PROMPT RULES:
- Field path: scenes[n].image_prompt.prompt
- 70–110 English words. Begin with camera angle & shot type (e.g. "Extreme close-up," "Wide shot," "Medium shot," etc.).
- Must mention product or category context naturally.
- MUST contain high-fidelity tokens (if missing, add them): insanely detailed, micro-details, hyper-realistic textures, visible skin pores, 4K, sharp focus.
- End with EXACT pattern: Shot by <professional cinema camera> with a <50mm or 85mm> lens.
- Negative prompt EXACT: "blurry, low quality, watermark, cartoon, distorted"
- size: "{aspectRatioCode}"
- Seed: 5-digit integer (10000–99999).

MOTION PROMPT RULES:
- 1–3 concise sentences in English.
- Only describe motion evolution (subject / camera / environment).
- No redundant repetition of static description phrases.

ASSET FLAGS:
- logo_provided = true if {brandLogo} == '업로드됨', else false.
- product_image_provided = true if {productImage} == '업로드됨', else false.
- If logo_provided true → integrate subtle logo presence in one early scene.
- If product_image_provided true → at least 2 scenes show interaction/visual of product.

JSON SCHEMA (NO EXTRA TOP-LEVEL KEYS):
{
  "project_meta": {
    "brand": "...",
    "product_or_category": "...",
    "industry": "...",
    "target": "...",
    "purpose": "...",
    "differentiation": "...",
    "video_length_seconds": {videoLengthSeconds},
    "aspect_ratio": "{aspectRatioCode}",
    "logo_provided": <true|false>,
    "product_image_provided": <true|false>
  },
  "scenes": [
    {
      "scene_number": 1,
      "timecode": "00:00-00:02",
      "concept_reference": "선택적으로 Phase1 개념 중 하나",
      "image_prompt": {
        "prompt": "70-110 words ... Shot by ARRI Alexa Mini with a 50mm lens.",
        "negative_prompt": "blurry, low quality, watermark, cartoon, distorted",
        "num_images": 1,
        "image": { "size": "{aspectRatioCode}" },
        "styling": { "style": "photo", "color": "color", "lighting": "natural" },
        "guidance_scale": 7.5,
        "seed": 12345,
        "filter_nsfw": true
      },
      "motion_prompt": {
        "prompt": "Concise motion description."
      },
      "duration_seconds": 2,
      "notes": "Optional"
    }
  ]
}

RESPONSE REQUIREMENTS:
- Output ONLY the JSON (no fences, no Korean outside concept_reference if not needed).
- Every image_prompt.prompt MUST end with 'Shot by ... lens.'
- All scenes must have size = "{aspectRatioCode}".
- Provide varied but coherent progression.
- No placeholder tokens like TODO / FILL / <>.
- Ensure strict valid JSON.
